<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>อ่านคำเทศนา</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="reader">
  <article class="reader-content">
    <h1 id="title"></h1>
    <p id="meta"></p>
    <div id="content" class="sermon-content">กำลังโหลดเนื้อหา…</div>
  </article>
</div>

<script>
const p=new URLSearchParams(location.search);
title.textContent=p.get("title")||"";
meta.textContent=(p.get("date")||"")+" • "+(p.get("preacher")||"");

const doc=p.get("doc");

fetch(doc+"?embedded=true")
.then(r=>r.text())
.then(html=>{
  const dom=new DOMParser().parseFromString(html,"text/html");
  const body=dom.querySelector(".doc-content")||dom.body;

  body.querySelectorAll("script,style").forEach(e=>e.remove());
  body.querySelectorAll("*").forEach(el=>el.removeAttribute("style"));

  document.getElementById("content").innerHTML=body.innerHTML;
})
.catch(()=>{
  document.getElementById("content").textContent="โหลดเนื้อหาไม่สำเร็จ";
});
</script>

</body>
</html>
