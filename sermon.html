<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>อ่านคำเทศนา</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
  <h1 id="title"></h1>
  <p id="meta"></p>
  <div id="content" class="content">กำลังโหลด...</div>
</div>

<script>
const p = new URLSearchParams(location.search);
document.getElementById("title").textContent = p.get("title") || "";
document.getElementById("meta").textContent =
  (p.get("date") || "") + " • " + (p.get("preacher") || "");

const docUrl = p.get("doc");

// ใช้ Google Docs export เป็น text (ตัดบรรทัดได้ 100%)
fetch(docUrl.replace(/\/edit.*$/, '/export?format=txt'))
  .then(r => r.text())
  .then(text => {
    const lines = text.split(/\n{2,}/);
    document.getElementById("content").innerHTML =
      lines.map(p => `<p>${p.replace(/\n/g,'<br>')}</p>`).join("");
  });
</script>

</body>
</html>
